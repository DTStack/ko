"use strict";(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[217],{4852:function(e,n,t){t.d(n,{Zo:function(){return c},kt:function(){return m}});var o=t(9231);function r(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function s(e,n){if(null==e)return{};var t,o,r=function(e,n){if(null==e)return{};var t,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||(r[t]=e[t]);return r}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)t=a[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(r[t]=e[t])}return r}var l=o.createContext({}),p=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},c=function(e){var n=p(e.components);return o.createElement(l.Provider,{value:n},e.children)},u={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=p(t),m=r,k=d["".concat(l,".").concat(m)]||d[m]||u[m]||a;return t?o.createElement(k,i(i({ref:n},c),{},{components:t})):o.createElement(k,i({ref:n},c))}));function m(e,n){var t=arguments,r=n&&n.mdxType;if("string"==typeof e||r){var a=t.length,i=new Array(a);i[0]=d;var s={};for(var l in n)hasOwnProperty.call(n,l)&&(s[l]=n[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var p=2;p<a;p++)i[p]=t[p];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},7087:function(e,n,t){t.r(n),t.d(n,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return u}});var o=t(4197),r=t(9567),a=(t(9231),t(4852)),i=["components"],s={sidebar_position:4,title:"FAQ"},l=void 0,p={unversionedId:"FAQ",id:"version-5.x/FAQ",title:"FAQ",description:"How to override webpack configs",source:"@site/versioned_docs/version-5.x/FAQ.md",sourceDirName:".",slug:"/FAQ",permalink:"/ko/docs/5.x/FAQ",editUrl:"https://github.com/DTStack/ko/website/versioned_docs/version-5.x/FAQ.md",tags:[],version:"5.x",sidebarPosition:4,frontMatter:{sidebar_position:4,title:"FAQ"},sidebar:"tutorialSidebar",previous:{title:"ko-lint-config",permalink:"/ko/docs/5.x/cli/ko-lint-config"},next:{title:"Architecture",permalink:"/ko/docs/5.x/advanced/architecture"}},c={},u=[{value:"How to override webpack configs",id:"how-to-override-webpack-configs",level:2},{value:"How to polyfill Node.js core modules:",id:"how-to-polyfill-nodejs-core-modules",level:2},{value:"Install browserify packages:",id:"install-browserify-packages",level:3},{value:"Add configs into <strong>ko.config.js</strong>:",id:"add-configs-into-koconfigjs",level:3},{value:"Environment variables process.env.node_env",id:"environment-variables-processenvnode_env",level:3},{value:"How to use web workers",id:"how-to-use-web-workers",level:2},{value:"Why my devSever config not working",id:"why-my-devsever-config-not-working",level:2},{value:"Why my plugin not working",id:"why-my-plugin-not-working",level:2}],d={toc:u};function m(e){var n=e.components,t=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h2",{id:"how-to-override-webpack-configs"},"How to override webpack configs"),(0,a.kt)("p",null,"You can override webpack configs via ",(0,a.kt)("strong",{parentName:"p"},"ko.config.js"),", and we recommend you override ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/webpack-contrib/copy-webpack-plugin"},"copy-webpack-plugin"),",",(0,a.kt)("a",{parentName:"p",href:"https://github.com/jantimon/html-webpack-plugin"},"html-webpack-plugin")," if needed. You can override like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"const CopyWebpackPlugin = require('copy-webpack-plugin');\n\nconst copyConfig = [\n  { from: path.resolve(__dirname, 'public/config'), to: 'config' },\n  { from: path.resolve(__dirname, 'public/assets'), to: 'assets' },\n]\n\nmodule.exports = {\n  ... //other webpack configs\n  plugins: [\n    new CopyWebpackPlugin(copyConfig),\n  ],\n};\n\n")),(0,a.kt)("h2",{id:"how-to-polyfill-nodejs-core-modules"},"How to polyfill Node.js core modules:"),(0,a.kt)("p",null,"Webpack 5 no longer polyfills Node.js core modules automatically which means if you use them in your code running in browsers or alike, you will have to install compatible modules from npm and include them yourself. And if your target environment is browser, just install some packages and add ",(0,a.kt)("strong",{parentName:"p"},"resolve.fallback")," into ",(0,a.kt)("strong",{parentName:"p"},"ko.config.js"),"."),(0,a.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"From v5.3.4, ko polyfill these core modules internally, so you don't have to install below packages and add configs."))),(0,a.kt)("h3",{id:"install-browserify-packages"},"Install browserify packages:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"pnpm add os-browserify crypto-browserify stream-browserify buffer string_decoder -D\n")),(0,a.kt)("h3",{id:"add-configs-into-koconfigjs"},"Add configs into ",(0,a.kt)("strong",{parentName:"h3"},"ko.config.js"),":"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n  ... //other webpack configs\n   resolve: {\n    fallback: {\n      fs: false,\n      path: false,\n      events: false,\n      os: require.resolve('os-browserify/browser'),\n      crypto: require.resolve('crypto-browserify'),\n      stream: require.resolve('stream-browserify'),\n      buffer: require.resolve('buffer/'),\n      string_decoder: require.resolve('string_decoder/'),\n    },\n  }\n};\n")),(0,a.kt)("h3",{id:"environment-variables-processenvnode_env"},"Environment variables process.env.node_env"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"To custom plugins in your ko.config.js between development and production builds you may use environment variables."),(0,a.kt)("li",{parentName:"ul"},"ko dev vs build inject process.env.node_env as developement and production")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"}," plugins: [\n    new CopyWebpackPlugin(yourOwnCopyConfig),\n    process.env.NODE_ENV === 'production' ? new VersionPlugin() : null\n  ].filter(Boolean)\n\n")),(0,a.kt)("h2",{id:"how-to-use-web-workers"},"How to use web workers"),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},"For compatible reason we use ",(0,a.kt)("inlineCode",{parentName:"p"},"work-loader")," internally. So you can migrate into ko without considering update your import Worker code.But using worker like below examples is recommended."))),(0,a.kt)("p",null,"You can use ",(0,a.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Using_web_workers"},"Web Workers")," without ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/webpack-contrib/worker-loader"},"worker-loader")," in ko, just like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"new Worker(new URL('./worker.js', import.meta.url));\n")),(0,a.kt)("p",null,"And you should update your project ",(0,a.kt)("strong",{parentName:"p"},"tsconfig.json")," into these configs:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"compilerOptions": {         \n  "module": "esnext",         \n  "moduleResolution": "Node"   \n} \n')),(0,a.kt)("h2",{id:"why-my-devsever-config-not-working"},"Why my devSever config not working"),(0,a.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,a.kt)("div",{parentName:"div",className:"admonition-heading"},(0,a.kt)("h5",{parentName:"div"},(0,a.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,a.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,a.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,a.kt)("div",{parentName:"div",className:"admonition-content"},(0,a.kt)("p",{parentName:"div"},(0,a.kt)("strong",{parentName:"p"},"webpack-dev-server")," has some troubles in ko, we downgrade ",(0,a.kt)("strong",{parentName:"p"},"webpack-dev-server")," temporarily to v3 in ko v5.3.4"))),(0,a.kt)("p",null,"ko use ",(0,a.kt)("strong",{parentName:"p"},"webpack-dev-server")," v4 internally. So if you find out that your old ",(0,a.kt)("strong",{parentName:"p"},"devServer")," configs not working,please refer to ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/webpack/webpack-dev-server/blob/master/migration-v4.md"},"webpack-dev-server migration v4")," and update your ",(0,a.kt)("strong",{parentName:"p"},"devServer")," configs."),(0,a.kt)("h2",{id:"why-my-plugin-not-working"},"Why my plugin not working"),(0,a.kt)("p",null,"some of your plugins may be too old to suit latest version of webpack(v5), so you should update your plugins to the latest version.Some of plugins are normally been used in your projects, like: "),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/webpack-contrib/copy-webpack-plugin#patterns"},"copy-webpack-plugin")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/jantimon/html-webpack-plugin"},"html-webpack-plugin"))),(0,a.kt)("p",null,"And make sure you have the right configs of your plugins when you migrate into ko."))}m.isMDXComponent=!0}}]);